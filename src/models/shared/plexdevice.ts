/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v4";
import { remap as remap$ } from "../../lib/primitives.js";
import { safeParse } from "../../lib/schemas.js";
import * as openEnums from "../../types/enums.js";
import { OpenEnum } from "../../types/enums.js";
import { Result as SafeParseResult } from "../../types/fp.js";
import * as types from "../../types/primitives.js";
import { SDKValidationError } from "../errors/sdkvalidationerror.js";

/**
 * The protocol used for the connection (http, https, etc)
 */
export enum PlexDeviceProtocol {
  Http = "http",
  Https = "https",
}
/**
 * The protocol used for the connection (http, https, etc)
 */
export type PlexDeviceProtocolOpen = OpenEnum<typeof PlexDeviceProtocol>;

export type Connection = {
  /**
   * The protocol used for the connection (http, https, etc)
   */
  protocol: PlexDeviceProtocolOpen;
  /**
   * The (ip) address or domain name used for the connection
   */
  address: string;
  /**
   * The port used for the connection
   */
  port: number;
  /**
   * The full URI of the connection
   */
  uri: string;
  /**
   * If the connection is local address
   */
  local: boolean;
  /**
   * If the connection is relayed through plex.direct
   */
  relay: boolean;
  /**
   * If the connection is using IPv6
   */
  iPv6: boolean;
};

export type PlexDevice = {
  name: string;
  product: string;
  productVersion: string;
  platform: string | null;
  platformVersion: string | null;
  device: string | null;
  clientIdentifier: string;
  createdAt: Date;
  lastSeenAt: Date;
  provides: string;
  /**
   * ownerId is null when the device is owned by the token used to send the request
   */
  ownerId: number | null;
  sourceTitle: string | null;
  publicAddress: string;
  accessToken: string;
  owned: boolean;
  home: boolean;
  synced: boolean;
  relay: boolean;
  presence: boolean;
  httpsRequired: boolean;
  publicAddressMatches: boolean;
  dnsRebindingProtection: boolean;
  natLoopbackSupported: boolean;
  connections: Array<Connection>;
};

/** @internal */
export const PlexDeviceProtocol$inboundSchema: z.ZodType<
  PlexDeviceProtocolOpen,
  unknown
> = openEnums.inboundSchema(PlexDeviceProtocol);

/** @internal */
export const Connection$inboundSchema: z.ZodType<Connection, unknown> = z
  .object({
    protocol: PlexDeviceProtocol$inboundSchema,
    address: types.string(),
    port: types.number(),
    uri: types.string(),
    local: types.boolean(),
    relay: types.boolean(),
    IPv6: types.boolean(),
  }).transform((v) => {
    return remap$(v, {
      "IPv6": "iPv6",
    });
  });

export function connectionFromJSON(
  jsonString: string,
): SafeParseResult<Connection, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => Connection$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'Connection' from JSON`,
  );
}

/** @internal */
export const PlexDevice$inboundSchema: z.ZodType<PlexDevice, unknown> = z
  .object({
    name: types.string(),
    product: types.string(),
    productVersion: types.string(),
    platform: types.nullable(types.string()),
    platformVersion: types.nullable(types.string()),
    device: types.nullable(types.string()),
    clientIdentifier: types.string(),
    createdAt: types.date(),
    lastSeenAt: types.date(),
    provides: types.string(),
    ownerId: types.nullable(types.number()),
    sourceTitle: types.nullable(types.string()),
    publicAddress: types.string(),
    accessToken: types.string(),
    owned: types.boolean(),
    home: types.boolean(),
    synced: types.boolean(),
    relay: types.boolean(),
    presence: types.boolean(),
    httpsRequired: types.boolean(),
    publicAddressMatches: types.boolean(),
    dnsRebindingProtection: types.boolean(),
    natLoopbackSupported: types.boolean(),
    connections: z.array(z.lazy(() => Connection$inboundSchema)),
  });

export function plexDeviceFromJSON(
  jsonString: string,
): SafeParseResult<PlexDevice, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => PlexDevice$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'PlexDevice' from JSON`,
  );
}
